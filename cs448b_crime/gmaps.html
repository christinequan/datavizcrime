<!doctype html>
<html lang="en">
   <head>
      <script src="http://maps.googleapis.com/maps/api/js"></script>
      <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
      <meta charset="utf-8"/>
      <link rel="stylesheet" href="style.css"/>
   </head>
   <body>
      <!-- Header -->
      <div id= "header" >
         <h1> SF CRIME MAP </h1>
      </div>
      <!-- Map Container -->
      <script type = text/javascript >
         function initialize() {

          var myLatlng = new google.maps.LatLng(37.767683, -122.433701);
          var workLatLng = new google.maps.LatLng(37.75, -122.4391);
           
           var mapProp = {
             center: myLatlng,
             zoom:13,
             mapTypeId:google.maps.MapTypeId.ROADMAP
           };
           var map = new google.maps.Map(document.getElementById("map"),mapProp);

             var workIcon = 'http://www.myiconfinder.com/uploads/iconsets/32-32-6096188ce806c80cf30dca727fe7c237.png';

             var homeIcon = 'http://www.myiconfinder.com/uploads/iconsets/32-32-32c51ea858089f8d99ae6a1f62deb573.png'

            var homeMarker = new google.maps.Marker({
              position: myLatlng,
              map: map,
              icon: homeIcon,
              draggable:true,
              title:"Drag me!"
          });

            var workMarker = new google.maps.Marker({
              position: workLatLng,
              map: map,
              icon: workIcon,
              draggable:true,
              title:"Drag me!"
          });

            var cityCircleHome = new google.maps.Circle({
                    strokeColor: '#FF0000',
                    strokeOpacity: 0.8,
                    strokeWeight: 0,
                    fillColor: '#FF0000',
                    fillOpacity: 0.15,
                    map: map,
                    center: myLatlng,
                    radius: 1000,
                    draggable: true,
                    editable: true,
                   });

            var cityCircleWork = new google.maps.Circle({
                    strokeColor: '#4e64d1',
                      strokeOpacity: 0.8,
                      strokeWeight: 0,
                      fillColor: '#4e64d1',
                      fillOpacity: 0.15,
                      map: map,
                      center: workLatLng,
                      radius: 1000,
                      draggable: true,
                      editable: true,
                   });

            // if you drag the marker
            homeMarker.addListener('drag', function() {
              cityCircleHome.setCenter(homeMarker.getPosition());
            });

            workMarker.addListener('drag', function() {
              cityCircleWork.setCenter(workMarker.getPosition());
            });

            // if you drag the circles

            cityCircleHome.addListener('drag', function() {
              homeMarker.setCenter(cityCircleHome.getPosition());
            });

            cityCircleWork.addListener('drag', function() {
              workMarker.setCenter(cityCircleWork.getPosition());
            });



         }



         google.maps.event.addDomListener(window, 'load', initialize);
         
         
      </script>
      <div id="map"></div>
      <!-- Input Form -->
      <div id="inputform">
      <!-- Address Forms -->
      <fieldset>
         <label> Addresses </label><br>
         <form>
            <p>
               <label> Home </label><br>
               <input type = "text"
                  id = "home_address"
                  value = "text here" />
            </p>
            <p>
               <label> Home Radius </label><br>
               1 <input type="range" name="points" min="1" max="10" step = "1" value = "0"> 10
            </p>
            <p>
               <label> Work </label><br>
               <input type = "text"
                  id = "work_address"
                  value = "text here" />
            </p>
            <p>
               <label> Work Radius </label><br>
               1 <input type="range" name="points" min="1" max="10" step = "1" value="0"> 10
            </p>
         </form>
      </fieldset>
      <!-- Crimes Checkboxes -->
      <fieldset>
         <form action="">
            <label> Crime </label><br>
            <input type="checkbox" id = crime name="ARSON" value="ARSON">Arson <br>
            <input type="checkbox" id = crime name="BRIBERY" value="BRIBERY">Bribery<br>
            <input type="checkbox" id = crime name="BURGLARY" value="BURGLARY">Burglary <br> 
            <input type="Button" value="Show values" onClick="showVal(this.form)"/> 
         </form>
      </fieldset>
      <input type="Submit" value="Submit" onclick="showInput();"><br />
      <!-- Tests --> 
      <script type="text/javascript">
         function showVal(frm) {
         var arr = [];
         for (var i in frm.crime) {
             if (frm.crime[i].checked) {
                 arr.push(frm.crime[i].value);
             }
         }
         alert(arr);
         return arr
         };  
         
         function showInput() {
             var home =  document.getElementById("home_address").value;
             var work = document.getElementById("work_address").value;
         
             document.getElementById('display1').innerHTML = home;
             document.getElementById('display2').innerHTML = work;
         };
         
         
      </script>
      <label>Your home address: </label>
      <p><span id='display1'></span> </p>
      <label>Your work address: </label>
      <p><span id='display2'></span> </p>
      <label>Crime  address: </label>
      <p><span id='display3'></span> </p>
   </body>
</html>